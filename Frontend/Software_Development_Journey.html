<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Journey Through Development</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --primary-bg: #000000;
            --secondary-bg: #111111;
            --card-bg: rgba(28, 28, 30, 0.8);
            --text-primary: #ffffff;
            --text-secondary: #8e8e93;
            --accent-blue: #007aff;
            --accent-gradient: linear-gradient(135deg, #007aff 0%, #5856d6 100%);
            --path-color: rgba(0, 122, 255, 0.3);
            --path-active: #007aff;
            --glass-bg: rgba(28, 28, 30, 0.7);
            --border-color: rgba(84, 84, 88, 0.3);
            --shadow-color: rgba(0, 0, 0, 0.5);
            --icon-bg: rgba(0, 122, 255, 0.1);
        }

        [data-theme="light"] {
            --primary-bg: #ffffff;
            --secondary-bg: #f2f2f7;
            --card-bg: rgba(255, 255, 255, 0.9);
            --text-primary: #000000;
            --text-secondary: #6d6d70;
            --path-color: rgba(0, 122, 255, 0.2);
            --glass-bg: rgba(255, 255, 255, 0.8);
            --border-color: rgba(200, 200, 200, 0.3);
            --shadow-color: rgba(0, 0, 0, 0.1);
            --icon-bg: rgba(0, 122, 255, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'SF Pro Display', system-ui, sans-serif;
            overflow: hidden;
            background: var(--primary-bg);
            color: var(--text-primary);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-feature-settings: "cv02", "cv03", "cv04", "cv11";
        }

        .theme-toggle {
            position: fixed;
            top: 2rem;
            left: 2rem;
            z-index: 1000;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: 50px;
            padding: 0.5rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 32px var(--shadow-color);
        }

        .theme-toggle:hover {
            transform: scale(1.05);
            background: var(--card-bg);
        }

        .theme-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .journey-viewport {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            position: relative;
            background: var(--primary-bg);
        }

        /* Dynamic Background Animations */
        .journey-viewport::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle at 25% 25%, var(--accent-blue) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, #5856d6 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, #ff6b6b 0%, transparent 70%);
            opacity: 0.03;
            animation: backgroundFloat 20s ease-in-out infinite;
            z-index: 1;
        }

        .journey-viewport::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(45deg, transparent 48%, rgba(0, 122, 255, 0.02) 50%, transparent 52%),
                linear-gradient(-45deg, transparent 48%, rgba(88, 86, 214, 0.02) 50%, transparent 52%);
            animation: diagonalMove 15s linear infinite;
            z-index: 2;
        }

        /* Geometric Background Patterns */
        .geometric-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 3;
        }

        .hex-pattern {
            position: absolute;
            width: 100px;
            height: 100px;
            opacity: 0.01;
            animation: hexFloat 12s ease-in-out infinite;
        }

        .hex-pattern::before {
            content: '';
            position: absolute;
            width: 30px;
            height: 30px;
            border: 1px solid var(--accent-blue);
            transform: rotate(45deg);
            border-radius: 6px;
        }

        .wave-animation {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 200%;
            height: 100px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(0, 122, 255, 0.05) 25%, 
                rgba(88, 86, 214, 0.05) 50%, 
                rgba(255, 107, 107, 0.05) 75%, 
                transparent 100%);
            animation: waveMove 25s linear infinite;
            z-index: 4;
        }

        .orb-container {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 5;
        }

        .floating-orb {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8), rgba(0, 122, 255, 0.1));
            filter: blur(1px);
            animation: orbFloat 20s ease-in-out infinite;
        }

        .orb-1 {
            width: 120px;
            height: 120px;
            top: 10%;
            left: 5%;
            animation-delay: 0s;
        }

        .orb-2 {
            width: 80px;
            height: 80px;
            top: 60%;
            right: 10%;
            animation-delay: -5s;
        }

        .orb-3 {
            width: 60px;
            height: 60px;
            top: 80%;
            left: 15%;
            animation-delay: -10s;
        }

        .journey-container {
            width: 500vw;
            height: 100vh;
            display: flex;
            transition: transform 1s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
        }

        .journey-step {
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .step-content {
            max-width: 600px;
            text-align: center;
            z-index: 10;
            opacity: 0;
            transform: translateY(40px);
            animation: slideInUp 1s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        }

        .step-content.active {
            animation-delay: 0.2s;
        }

        .icon-container {
            position: relative;
            width: 140px;
            height: 140px;
            margin: 0 auto 3rem;
            background: var(--icon-bg);
            backdrop-filter: blur(20px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid transparent;
            background-clip: padding-box;
            box-shadow: 
                0 20px 60px var(--shadow-color),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .icon-container::before {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 50%;
            background: var(--accent-gradient);
            z-index: -1;
            animation: rotate 4s linear infinite;
        }

        .icon-container::after {
            content: '';
            position: absolute;
            inset: 2px;
            border-radius: 50%;
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            z-index: -1;
        }

        .step-icon {
            font-size: 3.5rem;
            z-index: 2;
            filter: drop-shadow(0 4px 8px var(--shadow-color));
            animation: float 6s ease-in-out infinite;
        }

        .step-title {
            font-size: clamp(2rem, 4vw, 3.5rem);
            font-weight: 700;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
            letter-spacing: -0.025em;
        }

        .step-description {
            font-size: 1.125rem;
            line-height: 1.6;
            color: var(--text-secondary);
            font-weight: 400;
            max-width: 500px;
            margin: 0 auto;
            letter-spacing: -0.01em;
        }

        .connecting-path {
            position: absolute;
            top: 50%;
            right: -2px;
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, 
                var(--path-active) 0%, 
                var(--path-color) 50%, 
                transparent 100%);
            transform: translateY(-50%);
            z-index: 5;
            border-radius: 2px;
            overflow: hidden;
        }

        .connecting-path::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.4) 50%, 
                transparent 100%);
            animation: pathFlow 2s ease-in-out infinite;
        }

        .step-number {
            position: absolute;
            top: 2rem;
            right: 2rem;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: 50px;
            padding: 0.75rem 1.5rem;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-secondary);
            box-shadow: 0 8px 32px var(--shadow-color);
        }

        .progress-indicator {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--border-color);
            z-index: 100;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent-gradient);
            transition: width 1s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.3) 50%, 
                transparent 100%);
            animation: progressShine 2s ease-in-out infinite;
        }

        .navigation-controls {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 2rem;
            z-index: 100;
        }

        .nav-dots {
            display: flex;
            gap: 1rem;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: 50px;
            padding: 0.75rem 1.5rem;
            box-shadow: 0 8px 32px var(--shadow-color);
        }

        .nav-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .nav-dot.active {
            background: var(--accent-blue);
            transform: scale(1.2);
            box-shadow: 0 0 16px rgba(0, 122, 255, 0.4);
        }

        .nav-dot.active::after {
            content: '';
            position: absolute;
            inset: -4px;
            border-radius: 50%;
            border: 1px solid var(--accent-blue);
            opacity: 0.3;
            animation: pulse 2s ease-in-out infinite;
        }

        .nav-arrow {
            width: 44px;
            height: 44px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            color: var(--text-primary);
            box-shadow: 0 8px 32px var(--shadow-color);
        }

        .nav-arrow:hover {
            transform: scale(1.05);
            background: var(--card-bg);
            box-shadow: 0 12px 40px var(--shadow-color);
        }

        .nav-arrow:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: scale(0.95);
        }

        .nav-arrow svg {
            width: 20px;
            height: 20px;
            stroke-width: 2.5;
        }

        /* Background Patterns */
        .journey-step::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.02;
            background-image: 
                radial-gradient(circle at 25px 25px, var(--text-primary) 1px, transparent 1px),
                radial-gradient(circle at 75px 75px, var(--accent-blue) 0.5px, transparent 0.5px);
            background-size: 50px 50px, 100px 100px;
            animation: patternMove 20s linear infinite;
        }

        .journey-step::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(120deg, transparent 0%, rgba(0, 122, 255, 0.02) 50%, transparent 100%);
            animation: gradientShift 15s ease-in-out infinite;
        }

        /* Mesh Gradient Background */
        .mesh-gradient {
            position: absolute;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(at 27% 37%, hsla(215, 98%, 61%, 0.05) 0px, transparent 0%),
                radial-gradient(at 97% 21%, hsla(125, 98%, 72%, 0.05) 0px, transparent 50%),
                radial-gradient(at 52% 99%, hsla(354, 98%, 61%, 0.05) 0px, transparent 50%),
                radial-gradient(at 10% 29%, hsla(256, 96%, 67%, 0.05) 0px, transparent 50%),
                radial-gradient(at 97% 96%, hsla(38, 60%, 74%, 0.05) 0px, transparent 50%),
                radial-gradient(at 33% 50%, hsla(222, 67%, 73%, 0.05) 0px, transparent 50%),
                radial-gradient(at 79% 53%, hsla(343, 68%, 79%, 0.05) 0px, transparent 50%);
            animation: meshMove 30s ease-in-out infinite;
            z-index: 1;
        }

        /* Particle Effects */
        .particles {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: var(--accent-blue);
            border-radius: 50%;
            opacity: 0.3;
            animation: particleFloat 8s ease-in-out infinite;
        }

        /* Animations */
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes pathFlow {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.3; }
            50% { transform: scale(1.1); opacity: 0.6; }
        }

        @keyframes patternMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        @keyframes particleFloat {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.3;
            }
            90% {
                opacity: 0.3;
            }
            100% {
                transform: translateY(-10vh) translateX(50px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Advanced Background Animations */
        @keyframes backgroundFloat {
            0%, 100% { 
                transform: translate(-25%, -25%) rotate(0deg) scale(1); 
            }
            33% { 
                transform: translate(-30%, -20%) rotate(120deg) scale(1.05); 
            }
            66% { 
                transform: translate(-20%, -30%) rotate(240deg) scale(0.95); 
            }
        }

        @keyframes diagonalMove {
            0% { transform: translateX(-100%) translateY(-100%); }
            100% { transform: translateX(100%) translateY(100%); }
        }

        @keyframes hexFloat {
            0%, 100% { 
                transform: translateY(0px) rotate(0deg); 
                opacity: 0.01; 
            }
            50% { 
                transform: translateY(-20px) rotate(180deg); 
                opacity: 0.03; 
            }
        }

        @keyframes waveMove {
            0% { transform: translateX(-50%); }
            100% { transform: translateX(0%); }
        }

        @keyframes orbFloat {
            0%, 100% { 
                transform: translateY(0px) translateX(0px) scale(1);
                opacity: 0.1;
            }
            25% { 
                transform: translateY(-30px) translateX(20px) scale(1.1);
                opacity: 0.15;
            }
            50% { 
                transform: translateY(-10px) translateX(-15px) scale(0.9);
                opacity: 0.05;
            }
            75% { 
                transform: translateY(20px) translateX(10px) scale(1.05);
                opacity: 0.12;
            }
        }

        @keyframes gradientShift {
            0%, 100% { 
                background: linear-gradient(120deg, transparent 0%, rgba(0, 122, 255, 0.02) 50%, transparent 100%);
            }
            33% { 
                background: linear-gradient(240deg, transparent 0%, rgba(88, 86, 214, 0.02) 50%, transparent 100%);
            }
            66% { 
                background: linear-gradient(0deg, transparent 0%, rgba(255, 107, 107, 0.02) 50%, transparent 100%);
            }
        }

        @keyframes meshMove {
            0%, 100% { 
                filter: hue-rotate(0deg) blur(0px); 
            }
            50% { 
                filter: hue-rotate(90deg) blur(1px); 
            }
        }

        @keyframes lightning {
            0%, 100% { 
                box-shadow: 0 0 5px rgba(0, 122, 255, 0.3); 
            }
            50% { 
                box-shadow: 0 0 20px rgba(0, 122, 255, 0.8), 0 0 30px rgba(0, 122, 255, 0.4); 
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .theme-toggle {
                top: 1rem;
                left: 1rem;
            }

            .step-number {
                top: 1rem;
                right: 1rem;
                padding: 0.5rem 1rem;
                font-size: 0.75rem;
            }

            .icon-container {
                width: 120px;
                height: 120px;
                margin-bottom: 2rem;
            }

            .step-icon {
                font-size: 3rem;
            }

            .step-description {
                font-size: 1rem;
                padding: 0 1rem;
            }

            .navigation-controls {
                bottom: 1rem;
                gap: 1rem;
            }

            .nav-dots {
                padding: 0.5rem 1rem;
                gap: 0.75rem;
            }

            .nav-arrow {
                width: 40px;
                height: 40px;
            }

            .connecting-path {
                width: 60px;
            }

            .floating-orb {
                opacity: 0.5;
            }

            .orb-1 { width: 80px; height: 80px; }
            .orb-2 { width: 60px; height: 60px; }
            .orb-3 { width: 40px; height: 40px; }
        }

        @media (max-width: 480px) {
            .step-content {
                padding: 0 1rem;
            }

            .icon-container {
                width: 100px;
                height: 100px;
            }

            .step-icon {
                font-size: 2.5rem;
            }

            .connecting-path {
                display: none;
            }
        }

        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        @media (prefers-color-scheme: light) {
            :root:not([data-theme]) {
                --primary-bg: #ffffff;
                --secondary-bg: #f2f2f7;
                --card-bg: rgba(255, 255, 255, 0.9);
                --text-primary: #000000;
                --text-secondary: #6d6d70;
                --path-color: rgba(0, 122, 255, 0.2);
                --glass-bg: rgba(255, 255, 255, 0.8);
                --border-color: rgba(200, 200, 200, 0.3);
                --shadow-color: rgba(0, 0, 0, 0.1);
                --icon-bg: rgba(0, 122, 255, 0.05);
            }
        }
    </style>
</head>
<body>
    <div class="theme-toggle" onclick="toggleTheme()" role="button" aria-label="Toggle theme">
        <div class="theme-icon" id="themeIcon">🌙</div>
    </div>

    <div class="progress-indicator">
        <div class="progress-fill" id="progressFill"></div>
    </div>

    <div class="journey-viewport">
        <div class="geometric-bg" id="geometricBg"></div>
        <div class="mesh-gradient"></div>
        <div class="wave-animation"></div>
        <div class="orb-container">
            <div class="floating-orb orb-1"></div>
            <div class="floating-orb orb-2"></div>
            <div class="floating-orb orb-3"></div>
        </div>
        
        <div class="journey-container" id="journeyContainer">
            <!-- Step 1: Ideation -->
            <div class="journey-step">
                <div class="particles" id="particles1"></div>
                <div class="step-number">1 / 5</div>
                <div class="connecting-path"></div>
                <div class="step-content active">
                    <div class="icon-container">
                        <div class="step-icon">💡</div>
                    </div>
                    <h1 class="step-title">Ideation & Planning</h1>
                    <p class="step-description">
                        Every revolutionary product begins with a spark of innovation. We research, ideate, and architect solutions that push boundaries and redefine possibilities.
                    </p>
                </div>
            </div>

            <!-- Step 2: Development -->
            <div class="journey-step">
                <div class="particles" id="particles2"></div>
                <div class="step-number">2 / 5</div>
                <div class="connecting-path"></div>
                <div class="step-content">
                    <div class="icon-container">
                        <div class="step-icon">⚙️</div>
                    </div>
                    <h1 class="step-title">Development & Coding</h1>
                    <p class="step-description">
                        Precision engineering meets creative vision. Clean, scalable code transforms concepts into reality, building the foundation of exceptional experiences.
                    </p>
                </div>
            </div>

            <!-- Step 3: Testing -->
            <div class="journey-step">
                <div class="particles" id="particles3"></div>
                <div class="step-number">3 / 5</div>
                <div class="connecting-path"></div>
                <div class="step-content">
                    <div class="icon-container">
                        <div class="step-icon">🔍</div>
                    </div>
                    <h1 class="step-title">Testing & Refinement</h1>
                    <p class="step-description">
                        Obsessive attention to detail ensures perfection. Every interaction is tested, every edge case considered, every user experience optimized.
                    </p>
                </div>
            </div>

            <!-- Step 4: Deployment -->
            <div class="journey-step">
                <div class="particles" id="particles4"></div>
                <div class="step-number">4 / 5</div>
                <div class="connecting-path"></div>
                <div class="step-content">
                    <div class="icon-container">
                        <div class="step-icon">🚀</div>
                    </div>
                    <h1 class="step-title">Launch & Deployment</h1>
                    <p class="step-description">
                        The moment of transformation. Seamless deployment processes bring innovation to life, connecting users with extraordinary experiences.
                    </p>
                </div>
            </div>

            <!-- Step 5: Evolution -->
            <div class="journey-step">
                <div class="particles" id="particles5"></div>
                <div class="step-number">5 / 5</div>
                <div class="step-content">
                    <div class="icon-container">
                        <div class="step-icon">📈</div>
                    </div>
                    <h1 class="step-title">Growth & Evolution</h1>
                    <p class="step-description">
                        Continuous innovation drives progress. User insights fuel iterative improvements, scaling solutions that adapt and evolve with tomorrow's needs.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="navigation-controls">
        <button class="nav-arrow" id="prevBtn" onclick="navigate(-1)" aria-label="Previous step">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/>
            </svg>
        </button>
        
        <div class="nav-dots" role="tablist">
            <div class="nav-dot active" onclick="goToStep(0)" role="tab" aria-label="Step 1"></div>
            <div class="nav-dot" onclick="goToStep(1)" role="tab" aria-label="Step 2"></div>
            <div class="nav-dot" onclick="goToStep(2)" role="tab" aria-label="Step 3"></div>
            <div class="nav-dot" onclick="goToStep(3)" role="tab" aria-label="Step 4"></div>
            <div class="nav-dot" onclick="goToStep(4)" role="tab" aria-label="Step 5"></div>
        </div>
        
        <button class="nav-arrow" id="nextBtn" onclick="navigate(1)" aria-label="Next step">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/>
            </svg>
        </button>
    </div>

    <script>
        let currentStep = 0;
        const totalSteps = 5;
        const container = document.getElementById('journeyContainer');
        const progressFill = document.getElementById('progressFill');
        const navDots = document.querySelectorAll('.nav-dot');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const stepContents = document.querySelectorAll('.step-content');
        
        // Theme management
        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.getElementById('themeIcon');
            const currentTheme = body.getAttribute('data-theme');
            
            if (currentTheme === 'light') {
                body.removeAttribute('data-theme');
                themeIcon.textContent = '🌙';
                localStorage.setItem('theme', 'dark');
            } else {
                body.setAttribute('data-theme', 'light');
                themeIcon.textContent = '☀️';
                localStorage.setItem('theme', 'light');
            }
        }

        // Initialize theme
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const themeIcon = document.getElementById('themeIcon');
            
            if (savedTheme === 'light' || (!savedTheme && !prefersDark)) {
                document.body.setAttribute('data-theme', 'light');
                themeIcon.textContent = '☀️';
            } else {
                themeIcon.textContent = '🌙';
            }
        }

        // Create particles
        function createParticles() {
            for (let i = 1; i <= 5; i++) {
                const container = document.getElementById(`particles${i}`);
                for (let j = 0; j < 15; j++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDelay = Math.random() * 8 + 's';
                    particle.style.animationDuration = (8 + Math.random() * 4) + 's';
                    container.appendChild(particle);
                }
            }
        }

        // Create geometric background elements
        function createGeometricBackground() {
            const geometricBg = document.getElementById('geometricBg');
            
            // Create hexagonal patterns
            for (let i = 0; i < 20; i++) {
                const hex = document.createElement('div');
                hex.className = 'hex-pattern';
                hex.style.left = Math.random() * 100 + '%';
                hex.style.top = Math.random() * 100 + '%';
                hex.style.animationDelay = Math.random() * 12 + 's';
                hex.style.animationDuration = (12 + Math.random() * 8) + 's';
                geometricBg.appendChild(hex);
            }
        }

        // Advanced background animation system
        class BackgroundAnimationSystem {
            constructor() {
                this.animationId = null;
                this.time = 0;
                this.elements = [];
            }

            addElement(element, type, config) {
                this.elements.push({
                    element,
                    type,
                    config: { ...config },
                    phase: Math.random() * Math.PI * 2
                });
            }

            start() {
                this.animate();
            }

            animate() {
                this.time += 0.016; // ~60fps
                
                this.elements.forEach(({ element, type, config, phase }) => {
                    switch (type) {
                        case 'float':
                            const floatY = Math.sin(this.time * config.speed + phase) * config.amplitude;
                            const floatX = Math.cos(this.time * config.speed * 0.7 + phase) * (config.amplitude * 0.5);
                            element.style.transform = `translate(${floatX}px, ${floatY}px) rotate(${this.time * config.rotateSpeed + phase}rad)`;
                            break;
                        
                        case 'pulse':
                            const scale = 1 + Math.sin(this.time * config.speed + phase) * config.intensity;
                            const opacity = config.baseOpacity + Math.sin(this.time * config.speed + phase) * config.opacityRange;
                            element.style.transform = `scale(${scale})`;
                            element.style.opacity = opacity;
                            break;
                        
                        case 'wave':
                            const waveOffset = Math.sin(this.time * config.speed + phase) * config.amplitude;
                            element.style.transform = `translateY(${waveOffset}px)`;
                            break;
                    }
                });

                this.animationId = requestAnimationFrame(() => this.animate());
            }

            stop() {
                if (this.animationId) {
                    cancelAnimationFrame(this.animationId);
                    this.animationId = null;
                }
            }
        }

        const bgAnimationSystem = new BackgroundAnimationSystem();

        // Enhanced particle system with different types
        class EnhancedParticleSystem {
            constructor() {
                this.particles = [];
                this.animationId = null;
            }

            createParticle(type, x, y) {
                const particle = document.createElement('div');
                particle.className = `particle particle-${type}`;
                
                const config = this.getParticleConfig(type);
                
                particle.style.left = x + '%';
                particle.style.top = y + '%';
                particle.style.width = config.size + 'px';
                particle.style.height = config.size + 'px';
                particle.style.background = config.color;
                particle.style.borderRadius = config.borderRadius;
                particle.style.position = 'absolute';
                particle.style.pointerEvents = 'none';
                particle.style.zIndex = '6';
                
                this.particles.push({
                    element: particle,
                    x: parseFloat(x),
                    y: parseFloat(y),
                    vx: (Math.random() - 0.5) * config.velocity,
                    vy: (Math.random() - 0.5) * config.velocity,
                    life: config.life,
                    maxLife: config.life,
                    type: type
                });
                
                document.querySelector('.journey-viewport').appendChild(particle);
            }

            getParticleConfig(type) {
                const configs = {
                    spark: {
                        size: 2,
                        color: 'rgba(0, 122, 255, 0.8)',
                        borderRadius: '50%',
                        velocity: 2,
                        life: 180
                    },
                    glow: {
                        size: 4,
                        color: 'radial-gradient(circle, rgba(88, 86, 214, 0.6), transparent)',
                        borderRadius: '50%',
                        velocity: 1,
                        life: 300
                    },
                    trail: {
                        size: 1,
                        color: 'rgba(255, 255, 255, 0.4)',
                        borderRadius: '2px',
                        velocity: 3,
                        life: 120
                    }
                };
                return configs[type] || configs.spark;
            }

            update() {
                for (let i = this.particles.length - 1; i >= 0; i--) {
                    const particle = this.particles[i];
                    
                    particle.x += particle.vx;
                    particle.y += particle.vy;
                    particle.life--;
                    
                    const opacity = particle.life / particle.maxLife;
                    particle.element.style.opacity = opacity;
                    particle.element.style.left = particle.x + '%';
                    particle.element.style.top = particle.y + '%';
                    
                    if (particle.life <= 0 || particle.x < -5 || particle.x > 105 || particle.y < -5 || particle.y > 105) {
                        particle.element.remove();
                        this.particles.splice(i, 1);
                    }
                }
            }

            start() {
                const animate = () => {
                    this.update();
                    this.animationId = requestAnimationFrame(animate);
                };
                animate();
            }

            stop() {
                if (this.animationId) {
                    cancelAnimationFrame(this.animationId);
                    this.animationId = null;
                }
            }

            burst(x, y, count = 10, type = 'spark') {
                for (let i = 0; i < count; i++) {
                    const offsetX = x + (Math.random() - 0.5) * 10;
                    const offsetY = y + (Math.random() - 0.5) * 10;
                    this.createParticle(type, offsetX, offsetY);
                }
            }
        }

        const particleSystem = new EnhancedParticleSystem();

        // Update journey state
        function updateJourney() {
            const offset = currentStep * -100;
            container.style.transform = `translateX(${offset}vw)`;
            
            const progress = ((currentStep + 1) / totalSteps) * 100;
            progressFill.style.width = `${progress}%`;
            
            // Update navigation dots
            navDots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentStep);
            });
            
            // Update button states
            prevBtn.disabled = currentStep === 0;
            nextBtn.disabled = currentStep === totalSteps - 1;
            
            // Update content animation
            stepContents.forEach((content, index) => {
                content.classList.toggle('active', index === currentStep);
            });
            
            // Trigger content animation with delay
            setTimeout(() => {
                const currentContent = stepContents[currentStep];
                currentContent.style.animation = 'none';
                currentContent.offsetHeight; // Trigger reflow
                currentContent.style.animation = 'slideInUp 1s cubic-bezier(0.23, 1, 0.32, 1) forwards';
            }, 100);
        }

        // Navigation functions
        function navigate(direction) {
            const newStep = currentStep + direction;
            if (newStep >= 0 && newStep < totalSteps) {
                currentStep = newStep;
                updateJourney();
            }
        }

        function goToStep(stepIndex) {
            if (stepIndex >= 0 && stepIndex < totalSteps && stepIndex !== currentStep) {
                currentStep = stepIndex;
                updateJourney();
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                e.preventDefault();
                navigate(-1);
            } else if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
                e.preventDefault();
                navigate(1);
            } else if (e.key >= '1' && e.key <= '5') {
                e.preventDefault();
                goToStep(parseInt(e.key) - 1);
            } else if (e.key === 'Home') {
                e.preventDefault();
                goToStep(0);
            } else if (e.key === 'End') {
                e.preventDefault();
                goToStep(totalSteps - 1);
            }
        });

        // Touch/swipe support
        let startX = 0;
        let startY = 0;
        let isDragging = false;

        document.addEventListener('touchstart', (e) => {
            startX = e.touches[0].clientX;
            startY = e.touches[0].clientY;
            isDragging = true;
        }, { passive: true });

        document.addEventListener('touchmove', (e) => {
            if (!isDragging) return;
            
            const diffX = startX - e.touches[0].clientX;
            const diffY = startY - e.touches[0].clientY;
            
            if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 10) {
                e.preventDefault();
            }
        }, { passive: false });

        document.addEventListener('touchend', (e) => {
            if (!isDragging) return;
            isDragging = false;
            
            const diffX = startX - e.changedTouches[0].clientX;
            const diffY = startY - e.changedTouches[0].clientY;
            
            if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 80) {
                if (diffX > 0) {
                    navigate(1);
                } else {
                    navigate(-1);
                }
            }
            
            startX = 0;
            startY = 0;
        }, { passive: true });

        // Mouse wheel navigation with throttling
        let wheelTimeout;
        document.addEventListener('wheel', (e) => {
            e.preventDefault();
            
            if (wheelTimeout) return;
            
            const delta = e.deltaY;
            if (Math.abs(delta) > 10) {
                wheelTimeout = setTimeout(() => {
                    wheelTimeout = null;
                }, 300);
                
                if (delta > 0) {
                    navigate(1);
                } else {
                    navigate(-1);
                }
            }
        }, { passive: false });

        // Auto-advance functionality
        let autoAdvanceTimer;
        let inactivityTimer;
        
        function startAutoAdvance() {
            autoAdvanceTimer = setInterval(() => {
                if (currentStep < totalSteps - 1) {
                    navigate(1);
                } else {
                    goToStep(0);
                }
            }, 6000);
        }

        function stopAutoAdvance() {
            if (autoAdvanceTimer) {
                clearInterval(autoAdvanceTimer);
                autoAdvanceTimer = null;
            }
        }

        function resetInactivityTimer() {
            stopAutoAdvance();
            clearTimeout(inactivityTimer);
            inactivityTimer = setTimeout(startAutoAdvance, 5000);
        }

        // Reset timer on user interaction
        ['click', 'keydown', 'touchstart', 'wheel', 'mousemove'].forEach(event => {
            document.addEventListener(event, resetInactivityTimer, { passive: true });
        });

        // Visibility API
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                stopAutoAdvance();
            } else {
                resetInactivityTimer();
            }
        });

        // Initialize everything
        function init() {
            initTheme();
            createParticles();
            updateJourney();
            resetInactivityTimer();
            
            // Add smooth loading animation
            document.body.style.opacity = '0';
            setTimeout(() => {
                document.body.style.transition = 'opacity 0.5s ease';
                document.body.style.opacity = '1';
            }, 100);
        }

        // Performance optimization
        function optimizeForPerformance() {
            // Reduce animations on low-performance devices
            if (navigator.hardwareConcurrency && navigator.hardwareConcurrency < 4) {
                document.documentElement.style.setProperty('--reduce-motion', '1');
            }
            
            // Battery API support
            if ('getBattery' in navigator) {
                navigator.getBattery().then(battery => {
                    if (battery.level < 0.2) {
                        document.querySelectorAll('.particle').forEach(p => p.remove());
                        stopAutoAdvance();
                    }
                });
            }
        }

        // Focus management for accessibility
        function manageFocus() {
            const currentContent = stepContents[currentStep];
            const title = currentContent.querySelector('.step-title');
            if (title) {
                title.setAttribute('tabindex', '-1');
                title.focus();
            }
        }

        // Enhanced navigation with focus management
        const originalNavigate = navigate;
        navigate = function(direction) {
            originalNavigate(direction);
            setTimeout(manageFocus, 200);
        };

        const originalGoToStep = goToStep;
        goToStep = function(stepIndex) {
            originalGoToStep(stepIndex);
            setTimeout(manageFocus, 200);
        };

        // Intersection Observer for performance
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '50px'
        };

        const stepObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        // Add ARIA live region for screen readers
        const liveRegion = document.createElement('div');
        liveRegion.setAttribute('aria-live', 'polite');
        liveRegion.setAttribute('aria-atomic', 'true');
        liveRegion.className = 'sr-only';
        liveRegion.style.position = 'absolute';
        liveRegion.style.left = '-10000px';
        liveRegion.style.width = '1px';
        liveRegion.style.height = '1px';
        liveRegion.style.overflow = 'hidden';
        document.body.appendChild(liveRegion);

        // Update live region on navigation
        function updateLiveRegion() {
            const currentContent = stepContents[currentStep];
            const title = currentContent.querySelector('.step-title').textContent;
            const description = currentContent.querySelector('.step-description').textContent;
            liveRegion.textContent = `Step ${currentStep + 1} of ${totalSteps}: ${title}. ${description}`;
        }

        // Enhanced updateJourney with live region
        const originalUpdateJourney = updateJourney;
        updateJourney = function() {
            originalUpdateJourney();
            updateLiveRegion();
        };

        // Advanced gesture recognition
        class GestureRecognizer {
            constructor() {
                this.startTime = 0;
                this.startX = 0;
                this.startY = 0;
                this.velocityX = 0;
                this.isTracking = false;
            }

            start(e) {
                this.startTime = Date.now();
                this.startX = e.touches ? e.touches[0].clientX : e.clientX;
                this.startY = e.touches ? e.touches[0].clientY : e.clientY;
                this.isTracking = true;
            }

            move(e) {
                if (!this.isTracking) return;
                
                const currentX = e.touches ? e.touches[0].clientX : e.clientX;
                const currentTime = Date.now();
                const deltaTime = currentTime - this.startTime;
                const deltaX = currentX - this.startX;
                
                this.velocityX = deltaX / deltaTime;
            }

            end(e) {
                if (!this.isTracking) return;
                this.isTracking = false;
                
                const endX = e.changedTouches ? e.changedTouches[0].clientX : e.clientX;
                const endY = e.changedTouches ? e.changedTouches[0].clientY : e.clientY;
                const deltaX = endX - this.startX;
                const deltaY = endY - this.startY;
                const distance = Math.abs(deltaX);
                
                // Enhanced gesture detection
                if (Math.abs(deltaX) > Math.abs(deltaY) && distance > 50) {
                    const isQuickSwipe = Math.abs(this.velocityX) > 0.5;
                    const threshold = isQuickSwipe ? 50 : 100;
                    
                    if (distance > threshold) {
                        if (deltaX > 0) {
                            navigate(-1);
                        } else {
                            navigate(1);
                        }
                    }
                }
            }
        }

        const gestureRecognizer = new GestureRecognizer();

        // Replace simple touch handlers with advanced gesture recognition
        document.removeEventListener('touchstart', document.touchStartHandler);
        document.removeEventListener('touchmove', document.touchMoveHandler);
        document.removeEventListener('touchend', document.touchEndHandler);

        document.addEventListener('touchstart', (e) => {
            gestureRecognizer.start(e);
        }, { passive: true });

        document.addEventListener('touchmove', (e) => {
            gestureRecognizer.move(e);
            if (gestureRecognizer.isTracking) {
                e.preventDefault();
            }
        }, { passive: false });

        document.addEventListener('touchend', (e) => {
            gestureRecognizer.end(e);
        }, { passive: true });

        // Preload next step content for smoother transitions
        function preloadContent() {
            const nextStep = currentStep + 1;
            if (nextStep < totalSteps) {
                const nextContent = stepContents[nextStep];
                nextContent.style.willChange = 'transform, opacity';
            }
        }

        // Enhanced animation controls
        class AnimationController {
            constructor() {
                this.animations = new Map();
                this.isReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            }

            register(element, animationName, animation) {
                this.animations.set(`${element.id || element.className}-${animationName}`, {
                    element,
                    animation,
                    isActive: false
                });
            }

            play(key) {
                const anim = this.animations.get(key);
                if (anim && !this.isReducedMotion) {
                    anim.isActive = true;
                    anim.element.style.animation = anim.animation;
                }
            }

            pauseAll() {
                this.animations.forEach(anim => {
                    if (anim.isActive) {
                        anim.element.style.animationPlayState = 'paused';
                    }
                });
            }

            resumeAll() {
                this.animations.forEach(anim => {
                    if (anim.isActive) {
                        anim.element.style.animationPlayState = 'running';
                    }
                });
            }
        }

        const animController = new AnimationController();

        // Performance monitoring
        class PerformanceMonitor {
            constructor() {
                this.frameCount = 0;
                this.lastTime = performance.now();
                this.fps = 60;
                this.isMonitoring = false;
            }

            start() {
                this.isMonitoring = true;
                this.monitor();
            }

            monitor() {
                if (!this.isMonitoring) return;
                
                const currentTime = performance.now();
                this.frameCount++;
                
                if (currentTime - this.lastTime >= 1000) {
                    this.fps = this.frameCount;
                    this.frameCount = 0;
                    this.lastTime = currentTime;
                    
                    // Adjust quality based on performance
                    if (this.fps < 30) {
                        this.reduceQuality();
                    } else if (this.fps > 50) {
                        this.increaseQuality();
                    }
                }
                
                requestAnimationFrame(() => this.monitor());
            }

            reduceQuality() {
                document.querySelectorAll('.particle').forEach((p, i) => {
                    if (i % 2 === 0) p.remove();
                });
                document.documentElement.style.setProperty('--animation-duration', '2s');
            }

            increaseQuality() {
                // Can restore quality here if needed
            }

            stop() {
                this.isMonitoring = false;
            }
        }

        const perfMonitor = new PerformanceMonitor();

        // Enhanced initialization
        function enhancedInit() {
            init();
            optimizeForPerformance();
            perfMonitor.start();
            preloadContent();
            
            // Register service worker for offline capability
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js').catch(() => {
                    // Silent fail for demo
                });
            }
            
            // Add haptic feedback for supported devices
            if ('vibrate' in navigator) {
                document.querySelectorAll('.nav-arrow, .nav-dot').forEach(el => {
                    el.addEventListener('click', () => {
                        navigator.vibrate(50);
                    });
                });
            }
        }

        // Wait for DOM content to be loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', enhancedInit);
        } else {
            enhancedInit();
        }

        // Cleanup on page unload
        window.addEventListener('beforeunload', () => {
            stopAutoAdvance();
            perfMonitor.stop();
            animController.pauseAll();
        });

        // Export functions for potential external use
        window.JourneyAPI = {
            navigate,
            goToStep,
            getCurrentStep: () => currentStep,
            toggleTheme,
            pauseAutoAdvance: stopAutoAdvance,
            resumeAutoAdvance: startAutoAdvance
        };
    </script>
</body>
</html>